<% 
    function checkMissing(fields) {
        return fields.map(field => {
            if(field.data === null) {
                return `
                <a href="${field.href}">
                    ${field.href.replace('/', '').replace('-', ' ')}
                </a>`
            }
        });
    }
%>

<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<link rel="stylesheet" href="/public/css/default-layout.min.css" />
<link rel="stylesheet" href="/public/css/checkout.min.css" />

<body>
    <%- include('../partials/nav') %>

    <main class="container">
        <a href="/pick-domain" class="go-back">Go Back</a>
        <section>
            <h1>Checkout</h1>

            <div class="missing-data">
                <%- 
                    checkMissing([
                        { href: '/pick-tag', data: tag },
                        { href: '/pick-template', data: template }, 
                        { href: '/pick-domain', data: domain }
                    ]).join('');
                %>
            </div>

            <div class="inventory">
                <form method="POST" action="/checkout">
                    <div class="form-group">
                        <h3><%= template.title %></h3>
                        <p>$<%= template.price %></p>
                    </div>
                    <div class="form-group">
                        <h3><%= domain.domain %></h3>
                        <p>$<%= domain.price %></p>
                    </div>

                    <div class="form-footer">
                        <p>Total Cost: $<%= template.price + domain.price %></p>
                        <button type="submit">Continue To Checkout</button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <%- include('../partials/scripts') %>
</body>
</html>